import{A as f,v as x,w,x as y}from"./index.chunk-d6qrv3c9.js";import{E as C,F as v,I as h,L as R}from"./index.chunk-vcv9wm5n.js";var o=Symbol.for("preact-signals");function E(){if(!(z>1)){var G,B=!1;while(K!==void 0){var H=K;K=void 0,S++;while(H!==void 0){var I=H.o;if(H.o=void 0,H.f&=-3,!(8&H.f)&&g(H))try{H.c()}catch(J){if(!B)G=J,B=!0}H=I}}if(S=0,z--,B)throw G}else z--}function U(G){if(z>0)return G();z++;try{return G()}finally{E()}}var W=void 0;var K=void 0,z=0,S=0,_=0;function d(G){if(W!==void 0){var B=G.n;if(B===void 0||B.t!==W){if(B={i:0,S:G,p:W.s,n:void 0,t:W,e:void 0,x:void 0,r:B},W.s!==void 0)W.s.n=B;if(W.s=B,G.n=B,32&W.f)G.S(B);return B}else if(B.i===-1){if(B.i=0,B.n!==void 0){if(B.n.p=B.p,B.p!==void 0)B.p.n=B.n;B.p=W.s,B.n=void 0,W.s.n=B,W.s=B}return B}}}function Z(G){this.v=G,this.i=0,this.n=void 0,this.t=void 0}Z.prototype.brand=o;Z.prototype.h=function(){return!0};Z.prototype.S=function(G){if(this.t!==G&&G.e===void 0){if(G.x=this.t,this.t!==void 0)this.t.e=G;this.t=G}};Z.prototype.U=function(G){if(this.t!==void 0){var{e:B,x:H}=G;if(B!==void 0)B.x=H,G.e=void 0;if(H!==void 0)H.e=B,G.x=void 0;if(G===this.t)this.t=H}};Z.prototype.subscribe=function(G){var B=this;return q(function(){var H=B.value,I=W;W=void 0;try{G(H)}finally{W=I}})};Z.prototype.valueOf=function(){return this.value};Z.prototype.toString=function(){return this.value+""};Z.prototype.toJSON=function(){return this.value};Z.prototype.peek=function(){var G=W;W=void 0;try{return this.value}finally{W=G}};Object.defineProperty(Z.prototype,"value",{get:function(){var G=d(this);if(G!==void 0)G.i=this.i;return this.v},set:function(G){if(G!==this.v){if(S>100)throw new Error("Cycle detected");this.v=G,this.i++,_++,z++;try{for(var B=this.t;B!==void 0;B=B.x)B.t.N()}finally{E()}}}});function $(G){return new Z(G)}function g(G){for(var B=G.s;B!==void 0;B=B.n)if(B.S.i!==B.i||!B.S.h()||B.S.i!==B.i)return!0;return!1}function m(G){for(var B=G.s;B!==void 0;B=B.n){var H=B.S.n;if(H!==void 0)B.r=H;if(B.S.n=B,B.i=-1,B.n===void 0){G.s=B;break}}}function c(G){var B=G.s,H=void 0;while(B!==void 0){var I=B.p;if(B.i===-1){if(B.S.U(B),I!==void 0)I.n=B.n;if(B.n!==void 0)B.n.p=I}else H=B;if(B.S.n=B.r,B.r!==void 0)B.r=void 0;B=I}G.s=H}function A(G){Z.call(this,void 0),this.x=G,this.s=void 0,this.g=_-1,this.f=4}(A.prototype=new Z).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===_)return!0;if(this.g=_,this.f|=1,this.i>0&&!g(this))return this.f&=-2,!0;var G=W;try{m(this),W=this;var B=this.x();if(16&this.f||this.v!==B||this.i===0)this.v=B,this.f&=-17,this.i++}catch(H){this.v=H,this.f|=16,this.i++}return W=G,c(this),this.f&=-2,!0};A.prototype.S=function(G){if(this.t===void 0){this.f|=36;for(var B=this.s;B!==void 0;B=B.n)B.S.S(B)}Z.prototype.S.call(this,G)};A.prototype.U=function(G){if(this.t!==void 0){if(Z.prototype.U.call(this,G),this.t===void 0){this.f&=-33;for(var B=this.s;B!==void 0;B=B.n)B.S.U(B)}}};A.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var G=this.t;G!==void 0;G=G.x)G.t.N()}};Object.defineProperty(A.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var G=d(this);if(this.h(),G!==void 0)G.i=this.i;if(16&this.f)throw this.v;return this.v}});function j(G){return new A(G)}function l(G){var B=G.u;if(G.u=void 0,typeof B=="function"){z++;var H=W;W=void 0;try{B()}catch(I){throw G.f&=-2,G.f|=8,k(G),I}finally{W=H,E()}}}function k(G){for(var B=G.s;B!==void 0;B=B.n)B.S.U(B);G.x=void 0,G.s=void 0,l(G)}function n(G){if(W!==this)throw new Error("Out-of-order effect");if(c(this),W=G,this.f&=-2,8&this.f)k(this);E()}function V(G){this.x=G,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}V.prototype.c=function(){var G=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var B=this.x();if(typeof B=="function")this.u=B}finally{G()}};V.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,l(this),m(this),z++;var G=W;return W=this,n.bind(this,G)};V.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=K,K=this};V.prototype.d=function(){if(this.f|=8,!(1&this.f))k(this)};function q(G){var B=new V(G);try{B.c()}catch(H){throw B.d(),H}return B.d.bind(B)}var b,P;function D(G,B){C[G]=B.bind(null,C[G]||function(){})}function F(G){if(P)P();P=G&&G.S()}function p(G){var B=this,H=G.data,I=i(H);I.value=H;var J=y(function(){var N=B,Q=B.__v;while(Q=Q.__)if(Q.__c){Q.__c.__$f|=4;break}var O=j(function(){var X=I.value.value;return X===0?0:X===!0?"":X||""}),Y=j(function(){var X;return v(O.value)||((X=B.base)==null?void 0:X.nodeType)!==3});return B.__$u.c=function(){var X;if(!v(J.peek())&&((X=B.base)==null?void 0:X.nodeType)===3)B.base.data=J.peek();else B.__$f|=1,B.setState({})},q(function(){if(!L)L=this.N;if(this.N=u,Y.value&&N.base)N.base.data=O.value}),O},[]);return J.value}p.displayName="_st";Object.defineProperties(Z.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:p},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});D("__b",function(G,B){if(typeof B.type=="string"){var H,I=B.props;for(var J in I)if(J!=="children"){var N=I[J];if(N instanceof Z){if(!H)B.__np=H={};H[J]=N,I[J]=N.peek()}}}G(B)});D("__r",function(G,B){F();var H,I=B.__c;if(I){if(I.__$f&=-2,(H=I.__$u)===void 0)I.__$u=H=function(J){var N;return q(function(){N=this}),N.c=function(){I.__$f|=1,I.setState({})},N}()}b=I,F(H),G(B)});D("__e",function(G,B,H,I){F(),b=void 0,G(B,H,I)});D("diffed",function(G,B){F(),b=void 0;var H;if(typeof B.type=="string"&&(H=B.__e)){var{__np:I,props:J}=B;if(I){var N=H.U;if(N)for(var Q in N){var O=N[Q];if(O!==void 0&&!(Q in I))O.d(),N[Q]=void 0}else H.U=N={};for(var Y in I){var X=N[Y],T=I[Y];if(X===void 0)X=r(H,Y,T,J),N[Y]=X;else X.o(T,J)}}}G(B)});function r(G,B,H,I){var J=B in G&&G.ownerSVGElement===void 0,N=$(H);return{o:function(Q,O){N.value=Q,I=O},d:q(function(){if(!L)L=this.N;this.N=u;var Q=N.value.value;if(I[B]!==Q)if(I[B]=Q,J)G[B]=Q;else if(Q)G.setAttribute(B,Q);else G.removeAttribute(B)})}}D("unmount",function(G,B){if(typeof B.type=="string"){var H=B.__e;if(H){var I=H.U;if(I){H.U=void 0;for(var J in I){var N=I[J];if(N)N.d()}}}}else{var Q=B.__c;if(Q){var O=Q.__$u;if(O)Q.__$u=void 0,O.d()}}G(B)});D("__h",function(G,B,H,I){if(I<3||I===9)B.__$f|=2;G(B,H,I)});h.prototype.shouldComponentUpdate=function(G,B){var H=this.__$u;if(!(H&&H.s!==void 0||4&this.__$f))return!0;if(3&this.__$f)return!0;for(var I in B)return!0;for(var J in G)if(J!=="__source"&&G[J]!==this.props[J])return!0;for(var N in this.props)if(!(N in G))return!0;return!1};function i(G){return y(function(){return $(G)},[])}var L;var s=[];var e=function(G){queueMicrotask(function(){queueMicrotask(G)})};function a(){U(function(){var G;while(G=s.shift())L.call(G)})}function u(){if(s.push(this)===1)(C.requestAnimationFrame||e)(a)}var BB=(G)=>{let B=$("notStarted"),H=()=>{if(B.value==="notStarted")B.value="loading";return G().then((J)=>{return B.value="loaded",J})};return{getComponent:(J)=>(N)=>{let[Q,O]=x();return w(()=>void H().then(O),[]),Q?Q[J](N):void 0},load:H,loadingState:B}},AB=(G,B)=>{let{getComponent:H,load:I,loadingState:J}=BB(G);return{Component:H(B),load:I,loadingState:J}};var M=(G)=>{let[B,H]=x(G.value);return w(()=>q(()=>H(G.value)),[]),B};class GB{G;B;H;routerBaseRoute="";useRouteTransition_=!0;currentRoute_=$();notFoundRoute_=$();routeParams_=$({});routeRegexes;routesParentMap=new Map;constructor(G,B,H){this.routes=G;this.notFoundRoutes=B;this.urlSignal=H;this.routeRegexes=Object.keys(G).sort((I,J)=>{for(let N=0;N<Math.min(I.length,J.length);N++){let Q=I[N],O=J[N];if(Q===O)continue;if(Q===":")return 1;if(O===":")return-1;return Q.localeCompare(O)}return J.length-I.length}).map((I)=>({path:I,regex:new RegExp(`^${I.replace(/:[^/]*/g,"([^/]+)").replace(/^\?/,"/?").replace(/\?.*$/,"")}$`),keys:I.match(/:([^/]+)/g)?.map((J)=>J.slice(1))??[],optionalKeys:I.match(/\?([^/?]+)/g)?.map((J)=>J.slice(1))??[]}));for(let{path:I}of this.routeRegexes){if(I==="/")continue;if(I.startsWith("?")){this.routesParentMap.set(I,"/");continue}for(let{path:J}of this.routeRegexes){if(I===J)continue;if(J!=="/"&&J.endsWith("/"))continue;if(I.startsWith(J)){let N=this.routesParentMap.get(I);if(N&&N.length>J.length)continue;this.routesParentMap.set(I,J)}}}if(H)q(()=>this.updateCurrentRoute());else window.addEventListener("popstate",()=>this.updateCurrentRoute())}useRoutes=()=>{M(this.currentRoute_),M(this.notFoundRoute_),M(this.routeParams_);for(let G of Object.values(this.routes))M(G.loadingState);return null};setRouterBaseRoute=(G)=>{if(this.routerBaseRoute===G)return;this.routerBaseRoute=G,this.updateCurrentRoute()};setUseRouteTransition=(G)=>this.useRouteTransition_=G;updateCurrentRoute=()=>{let G=this.urlSignal?.value?.startsWith("/")?"":"/",B=this.urlSignal?.value?new URL(`http://x${this.routerBaseRoute}${G}${this.urlSignal.value}`):new URL(window.location.href),H=B.pathname.replace(this.routerBaseRoute,"").replace(/\/$/,"")||"/",I=this.routeRegexes.find(({regex:O,optionalKeys:Y})=>B.search===""===(Y.length===0)&&O.test(H));if(I??=this.routeRegexes.find(({regex:O})=>O.test(H)),!I){let Y=Object.keys(this.routes).filter((X)=>X==="/"||!X.endsWith("/")).sort((X,T)=>T.length-X.length).find((X)=>H.startsWith(X));this.currentRoute_.value=void 0,this.notFoundRoute_.value=Y,this.routeParams_.value={};return}this.currentRoute_.value=I.path,this.notFoundRoute_.value=void 0;let J=H.match(I.regex).slice(1),N={};I.keys.forEach((O,Y)=>N[O]=J[Y]),new URLSearchParams(B.search).forEach((O,Y)=>N[Y]=O),this.routeParams_.value=N??{}};currentRoute=this.currentRoute_;notFoundRoute=this.notFoundRoute_;getRouteParams=(G)=>this.routeParams_;isRouteVisible=(G)=>G==="/"||G.startsWith("?")?(this.currentRoute_.value??this.notFoundRoute_.value)===G:(this.currentRoute_.value??this.notFoundRoute_.value)?.startsWith(G);isRouteLoading=(G)=>this.routes[G]?.loadingState.value==="loading";isRouteLoaded=(G)=>this.routes[G]?.loadingState.value==="loaded";buildRouteLink=(...G)=>{let[B,H]=G;if(!H)return`${this.routerBaseRoute}${B}`;let I=this.routeRegexes.find(({path:O})=>O===B);if(!I)return`${this.routerBaseRoute}${B}`;let J=B;for(let O of I.keys){let Y=H[O];if(!Y)throw new Error(`Missing param ${O}`);J=J.replace(`:${O}`,encodeURIComponent(Y))}let N=new URLSearchParams;for(let O of I.optionalKeys){let Y=H[O];if(Y)N.set(O,Y);J=J.replace(`?${O}`,"")}if(J==="")J="/";let Q=N.toString();if(Q)J+=`?${Q}`;return`${this.routerBaseRoute}${J}`};loadRouteFn=(G)=>()=>this.routes[G]?.load();navigateToRouteFn=(...G)=>(B)=>{B?.preventDefault();let H=()=>{let[I,J]=G;U(()=>{this.currentRoute_.value=I,this.routeParams_.value=J??{}});let N=this.buildRouteLink(...G),Q=N==="//"?"/":N;if(this.urlSignal)this.urlSignal.value=Q;else window.history.pushState({},"",Q||"/")};if(this.useRouteTransition_)document.startViewTransition(()=>f(H));else H()};navigateToCustomRouteFn=(G)=>(B)=>{B?.preventDefault();let H=()=>{if(this.urlSignal)this.urlSignal.value=G;else window.history.pushState({},"",G),this.updateCurrentRoute()};if(this.useRouteTransition_)document.startViewTransition(()=>f(H));else H()};RouteLink=({path:G,params:B,children:H,...I})=>R("a",{...I,href:this.buildRouteLink(...[G,B]),onClick:this.navigateToRouteFn(...[G,B]),children:H},void 0,!1,void 0,this);RouteCustomLink=({url:G,children:B,...H})=>R("a",{...H,href:G,onClick:this.navigateToCustomRouteFn(G),children:B},void 0,!1,void 0,this);getComponentToRender=(G)=>{let B=this.currentRoute_.value??(this.notFoundRoute_.value===G?void 0:this.notFoundRoute_.value);if(!B)return;if(G===B){let J=this.routes[`${B}/`]?.Component;if(J)return J;let N=B==="/"?"":B;for(let[Q,{Component:O}]of Object.entries(this.routes))if(Q.startsWith(`${N}?`))return O;return}let H=B,I=this.routesParentMap.get(H);while(I&&I!==G)H=I,I=this.routesParentMap.get(H);if(I===G)return this.routes[H]?.Component;return};RouterRender=({subPath:G})=>{let B=this.getComponentToRender(G);return B?R(B,{},void 0,!1,void 0,this):this.NotFoundRouteRender({subPath:G})};NotFoundRouteRender=({subPath:G})=>this.notFoundRoutes[G]?.Component()??null}var FB=(G)=>G;export{FB as p,$ as q,BB as r,AB as s,M as t,GB as u};

//# debugId=13630242C2F331F964756E2164756E21
//# sourceMappingURL=index.chunk-zc36c8wf.js.map
